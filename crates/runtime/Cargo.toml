[package]
name = "runtime"
version = "0.1.0"
edition = "2021"

[features]
default = ["inhouse-backend"]
inhouse-backend = ["dep:foundation_metrics"]
# Note: stub-backend and inhouse-backend are mutually exclusive
# When using --all-features, inhouse-backend takes precedence
stub-backend = ["dep:foundation_metrics"]

# ============================================================================
# FILE WATCHING ARCHITECTURE FOR 200+ YEAR EXTENSIBILITY
# ============================================================================
# These features define CAPABILITIES, not implementations. They allow future
# platforms to signal which architectural patterns they support, enabling
# The Block to remain adaptable for centuries without code changes.
#
# Built-in platforms (Linux, macOS, Windows) automatically get the right
# capabilities based on target_os. Custom platforms explicitly enable the
# capabilities their implementation supports.
#
# IMPORTANT: These features are mutually exclusive for implementation selection.
# Enable only ONE at build time. Multiple enables will cause compilation errors.
# ============================================================================

# Reactor-integrated file watching: Platform integrates file notifications with async reactor
# - Built-in: Linux (via inotify)
# - Custom platforms: Enable if you provide reactor-integrated file watching
# - Requires: IoRegistration, async reactor polling
reactor-based-fs-watching = []

[dependencies]
concurrency = { path = "../concurrency" }
foundation_async = { path = "../foundation_async" }
foundation_metrics = { path = "../foundation_metrics", optional = true }
base64_fp = { path = "../base64_fp" }
rand = { path = "../rand" }
crypto_suite = { path = "../crypto_suite" }
sys = { path = "../sys" }
